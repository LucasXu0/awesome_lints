# Migration Guide: v2.0.0 to v2.1.0

## Breaking Change Overview

Version 2.1.0 introduces an opt-in rule model. All lint rules are disabled by default.

## Impact Assessment

### Who is affected?

- All users upgrading from v2.0.0
- CI/CD pipelines expecting specific warnings
- Teams with existing `analysis_options.yaml` configurations

### What breaks?

- Existing configurations without preset inclusion will have ZERO active rules
- Tests expecting specific lint warnings may fail
- CI checks may pass when they shouldn't

## Migration Paths

### Path 1: No Behavior Change (Strict Preset)

**Use case:** Maintain exact v2.0.0 behavior

**Steps:**
1. Update `pubspec.yaml`: `awesome_lints: ^2.1.0`
2. Update `analysis_options.yaml`:
   ```yaml
   include: package:awesome_lints/presets/strict.yaml
   ```
3. Run `dart run custom_lint` - should see same warnings as before

**Effort:** < 5 minutes
**Risk:** Very low

### Path 2: Adopt Recommended Preset

**Use case:** Balanced approach, fewer but valuable rules

**Steps:**
1. Update `pubspec.yaml`: `awesome_lints: ^2.1.0`
2. Update `analysis_options.yaml`:
   ```yaml
   include: package:awesome_lints/presets/recommended.yaml
   ```
3. Run `dart run custom_lint`
4. Address any new warnings (likely fewer than before)
5. Optionally add more rules as needed

**Effort:** 1-2 hours
**Risk:** Low

### Path 3: Gradual Adoption

**Use case:** Learn rules incrementally, minimal disruption

**Steps:**
1. Update `pubspec.yaml`: `awesome_lints: ^2.1.0`
2. Start with core:
   ```yaml
   include: package:awesome_lints/presets/core.yaml
   ```
3. Address core warnings (usually < 20)
4. Gradually enable more rules over weeks/months
5. Eventually reach recommended or custom configuration

**Effort:** Ongoing (low weekly effort)
**Risk:** Very low

## Verification

After migration, verify your configuration:

```bash
# Check which rules are active
dart run custom_lint --verbose

# Run analysis
dart run custom_lint

# Compare warning count with v2.0.0 (if using strict)
# Should be identical
```

## Troubleshooting

### No warnings appearing

**Cause:** Missing preset configuration

**Solution:**
```yaml
# analysis_options.yaml
include: package:awesome_lints/presets/recommended.yaml
```

### Too many warnings after upgrade

**Cause:** Using strict preset with previously disabled rules

**Solution:** Switch to recommended preset or customize:
```yaml
include: package:awesome_lints/presets/recommended.yaml

custom_lint:
  rules:
    - some_noisy_rule: false
```

### CI pipeline failing

**Cause:** No rules enabled, tests expect warnings

**Solution:** Add preset to CI's `analysis_options.yaml`

## Rollback Plan

If you need to rollback to v2.0.0:

```yaml
# pubspec.yaml
dev_dependencies:
  awesome_lints: ^2.0.0
```

Then remove preset configuration:
```yaml
# analysis_options.yaml
# Remove: include: package:awesome_lints/presets/...
```

## Questions?

See [opt-in rules feature document](../feature/2025-12-22-opt-in-rules-by-default.md) for full details.
